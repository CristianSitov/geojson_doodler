<!DOCTYPE html>
<html>

<head>

    <title>GeoJSON Doodler</title>
    
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.3/leaflet.draw.css' rel='stylesheet' />
    <link rel="stylesheet" href="stylesheet.css" />
    
</head>

<body>
    
    <div id="title">GeoJSON Doodler</div>
    
    <div id="instructions">
        <ul>
            <li>Use the tools on the left of the map to draw points, lines, or polygons</li>
            <li>Create as many as you like!</li>
            <li>Add properties and values</li>
            <li>Click 'Export' to download a .csv of your GeoJSONs!</li>
        </ul>
    </div>
    
    <div id="map"></div>
    
    <div>
        <a href='#' id='export'>Export</a>
    </div>
    
    <div id="export_table_container"></div>


    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.3/leaflet.draw.js'></script>    
    <script src="geojson_doodler.js"></script>
    
    <script>
        $("#export").on('click', function(event){
            
            save();
    
            $('#export_table_container').empty();
            $('#export_table_container').append('<table id="export_table" style="display:none"></table>');


            $.each(geoJSONArray, function(key, value){
                $("#export_table").append("<tr><td>"+value+"</td></tr>");
            });

            timestamp = Math.floor(Date.now()/1000);

            exportTableToCSV.apply(this, [$('#export_table'), 'GeoJSON_' + timestamp + '.csv']);
        });
    </script>
    

    
</body>

</html>

<!-- MANY THANKS TO https://bl.ocks.org/kalebdf/ee7a5e7f44416b2116c0 -->